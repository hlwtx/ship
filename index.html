<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <title>随机视频</title>
  <section id="main">
  <video id="player" src="#" controls webkit-playsinline playsinline></video>
</section>
    
  <section id="buttons">
  <button id="switch">连续: 开</button>
  <button id="next">下一个</button>
  <button id="qh"><a href="https://txc.qq.com/embed/phone/630133" style="color:#fff">留言板</a></button>
</section>

  <script>
  (function (window, document) {
      if (top != self) {
          window.top.location.replace(self.location.href);
      }
      var get = function (id) {
          return document.getElementById(id);
      }
      var bind = function (element, event, callback) {
          return element.addEventListener(event, callback);
      }
      var auto = true;
      var player = get('player');
      var randomm = function () {
          player.src = 'https://qqbyh.cn/api/tianm.php?_t=' + Math.random();
          player.play();
      }
      bind(get('next'), 'click', randomm);
      bind(player, 'error', function () {
          randomm();
      });
      bind(get('switch'), 'click', function () {
          auto = !auto;
          this.innerText = '连续: ' + (auto ? '开' : '关');
      });
      bind(player, 'ended', function () {
          if (auto) randomm();
      });
  })(window, document);
</script>
</body>
</html>
